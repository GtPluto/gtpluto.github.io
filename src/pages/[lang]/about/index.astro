---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import { useTranslations } from '../../../i18n/utils';
import { languages } from '../../../i18n/ui';

export async function getStaticPaths() {
	return Object.keys(languages).filter(lang => lang !== 'en').map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params;
const t = useTranslations(lang as any);

const aboutPosts = await getCollection('about', ({ id }) => id.startsWith(`${lang}/`));
---

<BaseLayout title={`关于我 | ZhouHD`}>
	<section class="about-intro">
		<h1>{t('nav.about')}</h1>
		<div class="bio">
			<p>
				你好，我是 ZhouHD。我是一名软件工程师。
				我热衷于构建解决实际问题的软件，并探索技术与人文的交汇点。
			</p>
			<p>
				当我不写代码时，我会阅读哲学书籍，思考创业点子，或者学习新东西。
			</p>
		</div>
	</section>

	<section class="more-about">
		<h2>{t('home.moreAbout')}</h2>
		<div class="grid">
			{aboutPosts.map((post) => (
				<a href={`/${lang}/about/${post.slug.split('/').slice(1).join('/')}`} class="card">
					<h3>{post.data.title}</h3>
					<p>{post.data.description}</p>
				</a>
			))}
		</div>
	</section>
</BaseLayout>

<style>
	.about-intro {
		margin-bottom: 4rem;
	}

	.bio {
		font-size: 1.1rem;
		line-height: 1.8;
		max-width: 700px;
	}

	.bio p {
		margin-bottom: 1.5rem;
	}

	.more-about h2 {
		margin-bottom: 2rem;
		border-bottom: 1px solid var(--color-border);
		padding-bottom: 0.5rem;
	}

	.grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
		gap: 2rem;
	}

	.card {
		display: block;
		padding: 1.5rem;
		border: 1px solid var(--color-border);
		border-radius: 8px;
		color: var(--color-text);
		text-decoration: none;
		transition: transform 0.2s, border-color 0.2s;
	}

	.card:hover {
		transform: translateY(-2px);
		border-color: var(--color-accent);
	}

	.card h3 {
		color: var(--color-accent);
		margin-bottom: 0.5rem;
	}

	.card p {
		margin: 0;
		opacity: 0.9;
	}
</style>

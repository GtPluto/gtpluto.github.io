---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('notes')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Learning Notes | ZhouHD" description="Professional learning notes and technical documentation.">
	<section>
		<h1>Learning Notes</h1>
		<p class="intro-text">
			A digital garden of my technical learnings, snippets, and references.
		</p>
		<div class="notes-grid">
			{posts.map((post) => (
				<a href={`/notes/${post.slug}`} class="note-card">
					<div class="note-header">
						<h2>{post.data.title}</h2>
						<span class="date">
							{post.data.pubDate.toLocaleDateString('en-us', {
								year: 'numeric',
								month: 'short',
								day: 'numeric',
							})}
						</span>
					</div>
					<p>{post.data.description}</p>
					{post.data.tags && (
						<div class="tags">
							{post.data.tags.map(tag => <span class="tag">{tag}</span>)}
						</div>
					)}
				</a>
			))}
		</div>
	</section>
</BaseLayout>

<style>
	.intro-text {
		font-size: 1.2rem;
		margin-bottom: 3rem;
		max-width: 600px;
	}

	.notes-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
		gap: 1.5rem;
	}

	.note-card {
		display: flex;
		flex-direction: column;
		padding: 1.5rem;
		background-color: var(--color-bg-code); /* Slightly different bg for notes */
		border-radius: 8px;
		color: var(--color-text);
		text-decoration: none;
		transition: transform 0.2s;
		height: 100%;
	}

	.note-card:hover {
		transform: translateY(-2px);
		background-color: var(--color-border); /* Darken slightly on hover */
	}

	.note-header {
		margin-bottom: 1rem;
	}

	.note-card h2 {
		font-size: 1.2rem;
		margin-bottom: 0.25rem;
		color: var(--color-primary);
	}

	.date {
		font-size: 0.8rem;
		opacity: 0.6;
	}

	.note-card p {
		font-size: 0.95rem;
		margin-bottom: auto; /* Push tags to bottom */
		opacity: 0.9;
	}

	.tags {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		margin-top: 1rem;
	}

	.tag {
		font-size: 0.75rem;
		padding: 0.2rem 0.5rem;
		background-color: var(--color-bg);
		border-radius: 4px;
		color: var(--color-accent);
	}
</style>
